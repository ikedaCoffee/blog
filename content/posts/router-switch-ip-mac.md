---
title: "ルーターとスイッチとIPアドレスとMACアドレスについて"
date: 2019-09-27T01:18:52+09:00
draft: false
toc: false
images:
  - https://picsum.photos/1024/768/?random
tags:
  - network
---

ネットワークの知識がなさすぎて友達に相談したところ、色々なことを教えてくれた。友達には、まじで感謝している。教わったことを自分なりにまとめてみた。メモのような感じなので、他の人が読んだところで理解はできないかもしれない。自分が記述したので間違いも多いかもしれない

## OSI参照モデル (通信の層)

|OSI参照モデル|
| ------------------------------------------------------------ |
| 7.  [アプリケーション層](https://ja.wikipedia.org/wiki/アプリケーション層)<br /> |
| 6.  [プレゼンテーション層](https://ja.wikipedia.org/wiki/プレゼンテーション層)<br /> |
| 5.  [セッション層](https://ja.wikipedia.org/wiki/セッション層)<br /> |
| 4.  [トランスポート層](https://ja.wikipedia.org/wiki/トランスポート層)<br />セグメント(パケットのようなもの) |
| 3.  [ネットワーク層](https://ja.wikipedia.org/wiki/ネットワーク層)<br />パケット<br />IPアドレス<br />ルーター(IPアドレスが理解できる) |
| 2.  [データリンク層](https://ja.wikipedia.org/wiki/データリンク層)<br />フレーム(パケットのようなもの)<br />ブロードキャスト(同じネットワーク範囲内で行われる)<br />スイッチ(MACアドレスしか理解できない)<br />MACアドレス(NIC)<br />ARPテーブル = 送信先IPアドレスと送信先MACアドレス両方の情報 |
| 1.  [物理層](https://ja.wikipedia.org/wiki/物理層)<br />ケーブル<br />ハブ |

## スイッチについて

1. ハブに6台くらいのPC繋いでるとする。リクエストはハブを経由して6台に全部送られる(ブローキャスト)
1. 複数のPCがリクエストを送るとリクエスト同士がコリジョンを起こす(コリジョン・ドメイン)
1. ハブの代わりにスイッチを使う
1. スイッチを経由して、ARPリクエストをブロードキャストする(全部の繋がってるPCにARPリクエストが飛ぶ、ブロードキャスト・ドメイン)
1. ARPリプライは指定したIPのMACアドレスのみから送られてくる
1. MACアドレスがわかったのでNICが識別される
1. スイッチの場合、ネットワーク部が違うと通信できない
1. スイッチングはどのようにスイッチするか

## ルーターについて

1. スイッチを外して、ルーターのみで通信するとする(例えば6台)
1. ネットワーク部が違くても通信できる
1. 例えば、192.168.1.1/24と192.168.2.1/24はネットワークが異なる
1. 192.168.1.1/24のブロードキャスト・ドメインは192.168.1.255
1. 違うネットワーク同士をつなぐのがルーター
1. コリジョン・ドメインを分けることもできる

## ルーターが原因でpingが飛ばない場合

1. TTLは生存時間(経由したルーターの数のようなもの)
1. 途中でルーターが不具合を起こした場合にPingが帰ってこない
1. 経由しているルーターの道筋をトレースルート(Windowsだとトレーサートというらしい)
1. ルーティングはルーターがどのルートを通っていくか

## L2スイッチとL3スイッチ

1. L2スイッチはレイヤー2で動く機器(MACアドレスのみを理解する)
1. L3スイッチはレイヤー3で動く機器(MACアドレスもIPアドレスも理解する)

## VLAN

VLANを使えば、ブロードキャストドメインを分けることができる

## DHCP(Dynamic Host Configuration Protocol)

IPアドレスを自動で割り振る。設定をONとOFFにすることができる

## ネットワークを勉強するに当たって参照すべきサイト

http://www5e.biglobe.ne.jp/aji/3min/

特に24回目は参考になると紹介されたが、0回〜81回まで全部読んどけと友達に紹介してもらった
